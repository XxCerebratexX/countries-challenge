"use strict";var fetch=require("node-fetch"),bodyParser=require("body-parser"),mockAPIResponse=require("./mockAPI.js"),dotenv=require("dotenv"),port=8003,express=require("express"),app=express({origin:!0}),savedTrip=[];app.listen(port,function(){console.log("Server is running on ".concat(port))}),app.use(bodyParser.urlencoded({extended:!1})),app.use(bodyParser.json());var cors=require("cors");dotenv.config(),app.use(express.static("dist")),app.use(cors({origin:!0})),app.get("/getCountries",getCountries),app.get("/getCountriesByName",getCountriesDataByName),app.get("/test",function(e,r){r.send(mockAPIResponse)});var headersForGetCall={method:"GET",headers:{"Content-Type":"application/json"}};function getCountries(e,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("https://restcountries.eu/rest/v2/all?fields=name",headersForGetCall).then(function(e){return e.json()}).then(function(e){return console.log("Call was successful"),e}).catch(function(e){return console.log(e),handleError(e,"REST Countries")}));case 2:n=e.sent,r.send({response:n});case 4:case"end":return e.stop()}})}function getCountriesDataByName(r,n){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(r.query),r.query.name)return e.next=4,regeneratorRuntime.awrap(fetch("https://restcountries.eu/rest/v2/name/".concat(r.query.name,"?fields=name;region;currencies;languages;population"),headersForGetCall).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return handleError(e,"REST Countries")}));e.next=6;break;case 4:t=e.sent,n.send({response:t});case 6:case"end":return e.stop()}})}function handleError(e,r){return{type:"Error",message:e.message.replace(/((http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?)/g,r)||"Something went wrong, try again later",from:r}}function handleErrorResponse(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(var t=0,o=r;t<o.length;t++){var s=o[t];if("Error"===s.type||s.error)return s}}module.exports=app;
//# sourceMappingURL=server.min.js.map
