{"version":3,"sources":["app.js"],"names":["require","_apiController","document","addEventListener","getCountriesList","searchBar","getElementById","closeList","element","x","getElementsByClassName","i","length","searchCountry","removeChild","e","div1","appendChild","div2","searchValue","value","countryReturn","disabled","createElement","setAttribute","concat","id","parentNode","countries","forEach","el","name","substr","toLowerCase","push","innerHTML","ev","newValue","target","getElementsByTagName","info","regeneratorRuntime","async","_context","prev","next","awrap","getCountryInfo","sent","response","stop"],"mappings":"+ZAAAA,QAAA,uBAEA,IAAAC,eAAAD,QAAA,sBAMAE,SAASC,iBAAiB,mBAAoB,YAE1C,EAAAF,eAAAG,oBACA,IAAIC,EAAYH,SAASI,eAAe,cA+B/B,SAAMC,EAAAC,GAId,IAhCG,IAAAC,EAAAP,SAAAQ,uBAAA,qBAgCHC,EAAA,EAAAA,EAAAF,EAAAG,OAAAD,IAoBWH,GAAWC,EAAEE,IAAMH,GAAWH,GAlBjCQ,EAAAA,GAAAA,WAAgBC,YAAAL,EAAAE,IAVJT,SAJDC,iBAAA,QAAA,SAAAY,GAKAC,EAAKC,EAAAA,UAzBrBZ,EAAUF,iBAAiB,QAAS,SAACY,GACjC,IAAIC,EAAME,EACVX,IACA,IAAIY,EAAcd,EAAUe,MAC5B,GAA0B,GAAtBD,EAAYP,OAAa,CACzB,IAAIS,EAAgB,GACpBnB,SAASI,eAAe,iBAAiBgB,UAAW,GAEpDN,EAAOd,SAASqB,cAAc,QACzBC,aAAa,KAAlB,GAAAC,OAA2BpB,EAAUqB,GAArC,kBAvBhBV,EAAAQ,aAAA,QAAA,qBAyBgBnB,EAAUsB,WAAWV,YAAYD,GAEjCY,eAAAA,UAAUC,QAAQ,SAAAC,GAnBzB3B,EAAiB4B,KAAAC,OAAA,EAAAb,EAAoBP,QAAMqB,gBAAAd,EAAAc,gBAEhDZ,EAAAa,KAAAJ,IACgB5B,EAASI,SAAAA,cAAT,QAoBS6B,UAAL,WAAAV,OAA4BK,EAAGC,KAAKC,OAAO,EAAGb,EAAYP,QAA1D,aAlBpBM,EAAwBiB,WAAAL,EAAAC,KAAAC,OAAAb,EAAAP,QACVT,EAAAA,WAAAA,+BAAAA,OAAiC2B,EAAAC,KAAjC5B,MACNe,EAAAf,iBAAA,QAAA,SAAAiC,GACS,IAAAC,EAAAD,EAAAE,OAAAC,qBAAA,SAAA,GAAAnB,MACSf,EAAUe,MAA5BiB,EAoBgB9B,MAlBRc,EAAgBJ,YAApBC,WAKKM,SAALlB,eAA2B,iBAA3BgB,UAAA,IAMQJ,SAAIZ,eAAYiB,iBAAhBpB,iBAAA,QAAA,WAAA,IAAAqC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAE,KAAA,EAAAJ,mBAAAK,OACA,EAAA7C,eAAA8C,gBAAA1C,EAA4Be,QAD5B,KAAA,EACIoB,EADJG,EAAAK,KAEA9B,QAAKiB,IAAAA,IACLjB,EAAAA,eAAAA,YAAKiB,EAALc,UAHA,KAAA,EAAA,IAAA,MAAA,OAAAN,EAAAO,YAmBmD3C","file":"app.min.js","sourcesContent":["import \"./styles/style.scss\";\r\n\r\nimport {\r\n    getCountriesList,\r\n    getCountryInfo,\r\n    createCard,\r\n    countries\r\n} from \"./js/apiController\"\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\r\n    getCountriesList()\r\n    let searchBar = document.getElementById('search-bar');\r\n\r\n    function autoComplete() {\r\n        searchBar.addEventListener('input', (e) => {\r\n            let div1, div2;\r\n            closeList();\r\n            let searchValue = searchBar.value;\r\n            if (searchValue.length >= 3) {\r\n                let countryReturn = [];\r\n                document.getElementById('submit-search').disabled = false;\r\n\r\n                div1 = document.createElement('div');\r\n                div1.setAttribute('id', `${searchBar.id}-autocomplete`);\r\n                div1.setAttribute('class', 'autocomplete-list');\r\n                searchBar.parentNode.appendChild(div1);\r\n\r\n                countries.forEach(el => {\r\n                    if (el.name.substr(0, searchValue.length).toLowerCase() === searchValue.toLowerCase()) {\r\n                        countryReturn.push(el);\r\n                        div2 = document.createElement('div');\r\n                        div2.innerHTML = `<strong>${el.name.substr(0, searchValue.length)}</strong>`;\r\n                        div2.innerHTML += el.name.substr(searchValue.length);\r\n                        div2.innerHTML += `<input type='hidden' value='${el.name}'>`;\r\n                        div2.addEventListener('click', (ev) => {\r\n                            let newValue = ev.target.getElementsByTagName('input')[0].value;\r\n                            searchBar.value = newValue;\r\n                            closeList();\r\n                        })\r\n                        div1.appendChild(div2);\r\n                    }\r\n                });\r\n            } else {\r\n                document.getElementById('submit-search').disabled = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    function searchCountry() {\r\n        document.getElementById('submit-search').addEventListener('click', async(e) => {\r\n            let info = await getCountryInfo(searchBar.value);\r\n            console.log(info);\r\n            createCard(info.response);\r\n        })\r\n\r\n    }\r\n\r\n    document.addEventListener(\"click\", (e) => {\r\n        closeList(e.target);\r\n    })\r\n\r\n    function closeList(element) {\r\n        /*close all autocomplete lists in the document,\r\n        except the one passed as an argument:*/\r\n        var x = document.getElementsByClassName(\"autocomplete-list\");\r\n        for (var i = 0; i < x.length; i++) {\r\n            if (element != x[i] && element != searchBar) {\r\n                x[i].parentNode.removeChild(x[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n    autoComplete();\r\n    searchCountry();\r\n    closeList();\r\n})\r\n\r\nexport {\r\n    getCountriesList,\r\n    getCountryInfo,\r\n    createCard\r\n}"]}